<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bokeh Plot</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.2.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.2.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.2.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.2.2.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div id="ab1a0fab-440d-4344-8975-8b242c075903" data-root-id="p1209" style="display: contents;"></div>
  
    <script type="application/json" id="p1226">
      {"dc7b7d35-3fce-435a-a0cb-79742417862f":{"version":"3.2.2","title":"Bokeh Application","roots":[{"type":"object","name":"GridBox","id":"p1209","attributes":{"rows":null,"cols":null,"children":[[{"type":"object","name":"Figure","id":"p1013","attributes":{"width":800,"x_range":{"type":"object","name":"DataRange1d","id":"p1015"},"y_range":{"type":"object","name":"Range1d","id":"p1023","attributes":{"end":0.01}},"x_scale":{"type":"object","name":"LinearScale","id":"p1024"},"y_scale":{"type":"object","name":"LinearScale","id":"p1025"},"title":{"type":"object","name":"Title","id":"p1016","attributes":{"text":"Impacts/kWh"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p1050","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1007","attributes":{"selected":{"type":"object","name":"Selection","id":"p1008","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1009"},"data":{"type":"map","entries":[["h",{"type":"ndarray","array":{"type":"bytes","data":"BQAAAAYAAAAHAAAACAAAAA=="},"shape":[4],"dtype":"int32","order":"little"}],["Acidification",{"type":"ndarray","array":{"type":"bytes","data":"jU0NMwpdGz+xsmhWNhcoP6IclHFlXjA/omQZiPwnND8="},"shape":[4],"dtype":"float64","order":"little"}],["Climate change",{"type":"ndarray","array":{"type":"bytes","data":"eFDoXyYaUT/a+mdb9Y9QP6IclHFlXlA/xKGULn1gUD8="},"shape":[4],"dtype":"float64","order":"little"}],["Energy",{"type":"ndarray","array":{"type":"bytes","data":"eFDoXyYaYT/a+mdb9Y9gP6IclHFlXmA/xKGULn1gYD8="},"shape":[4],"dtype":"float64","order":"little"}],["Eutrophication",{"type":"ndarray","array":{"type":"bytes","data":"eFDoXyYaYT8wETUm3JJjPxLMLK/LGGM/WM6Xv3zlYj8="},"shape":[4],"dtype":"float64","order":"little"}],["Material ressource",{"type":"ndarray","array":{"type":"bytes","data":"vY+xVN+qYz+ay4FzItJiP4J7xewx02U/yr0fqvsxaT8="},"shape":[4],"dtype":"float64","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"p1051","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1052"}}},"glyph":{"type":"object","name":"Line","id":"p1047","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Acidification"},"line_color":"orange","line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"p1048","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Acidification"},"line_color":"orange","line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"p1049","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Acidification"},"line_color":"orange","line_alpha":0.2,"line_width":2}}}},{"type":"object","name":"GlyphRenderer","id":"p1060","attributes":{"data_source":{"id":"p1007"},"view":{"type":"object","name":"CDSView","id":"p1061","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1062"}}},"glyph":{"type":"object","name":"Line","id":"p1057","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Climate change"},"line_color":"blue","line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"p1058","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Climate change"},"line_color":"blue","line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"p1059","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Climate change"},"line_color":"blue","line_alpha":0.2,"line_width":2}}}},{"type":"object","name":"GlyphRenderer","id":"p1070","attributes":{"data_source":{"id":"p1007"},"view":{"type":"object","name":"CDSView","id":"p1071","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1072"}}},"glyph":{"type":"object","name":"Line","id":"p1067","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Energy"},"line_color":"green","line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"p1068","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Energy"},"line_color":"green","line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"p1069","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Energy"},"line_color":"green","line_alpha":0.2,"line_width":2}}}},{"type":"object","name":"GlyphRenderer","id":"p1080","attributes":{"data_source":{"id":"p1007"},"view":{"type":"object","name":"CDSView","id":"p1081","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1082"}}},"glyph":{"type":"object","name":"Line","id":"p1077","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Eutrophication"},"line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"p1078","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Eutrophication"},"line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"p1079","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Eutrophication"},"line_alpha":0.2,"line_width":2}}}},{"type":"object","name":"GlyphRenderer","id":"p1090","attributes":{"data_source":{"id":"p1007"},"view":{"type":"object","name":"CDSView","id":"p1091","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1092"}}},"glyph":{"type":"object","name":"Line","id":"p1087","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Material ressource"},"line_color":"red","line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"p1088","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Material ressource"},"line_color":"red","line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"p1089","attributes":{"x":{"type":"field","field":"h"},"y":{"type":"field","field":"Material ressource"},"line_color":"red","line_alpha":0.2,"line_width":2}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1022","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1036"},{"type":"object","name":"WheelZoomTool","id":"p1037"},{"type":"object","name":"BoxZoomTool","id":"p1038","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p1039","attributes":{"syncable":false,"level":"overlay","visible":false,"left_units":"canvas","right_units":"canvas","bottom_units":"canvas","top_units":"canvas","line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"SaveTool","id":"p1040"},{"type":"object","name":"ResetTool","id":"p1041"},{"type":"object","name":"HelpTool","id":"p1042"},{"type":"object","name":"HoverTool","id":"p1043","attributes":{"renderers":"auto","tooltips":[["(h,I)","($x, $y)"]]}}]}},"left":[{"type":"object","name":"LinearAxis","id":"p1031","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1032","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1033"},"axis_label":"impact/kWh","major_label_policy":{"type":"object","name":"AllLabels","id":"p1034"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p1026","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1027","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1028"},"axis_label":"height (m)","major_label_policy":{"type":"object","name":"AllLabels","id":"p1029"}}}],"center":[{"type":"object","name":"Grid","id":"p1030","attributes":{"axis":{"id":"p1026"}}},{"type":"object","name":"Grid","id":"p1035","attributes":{"dimension":1,"axis":{"id":"p1031"}}},{"type":"object","name":"Legend","id":"p1094","attributes":{"items":[{"type":"object","name":"LegendItem","id":"p1053","attributes":{"label":{"type":"value","value":"Acidification"},"renderers":[{"id":"p1050"}]}},{"type":"object","name":"LegendItem","id":"p1063","attributes":{"label":{"type":"value","value":"Climate change"},"renderers":[{"id":"p1060"}]}},{"type":"object","name":"LegendItem","id":"p1073","attributes":{"label":{"type":"value","value":"Energy"},"renderers":[{"id":"p1070"}]}},{"type":"object","name":"LegendItem","id":"p1083","attributes":{"label":{"type":"value","value":"Eutrophication"},"renderers":[{"id":"p1080"}]}},{"type":"object","name":"LegendItem","id":"p1093","attributes":{"label":{"type":"value","value":"Material ressource"},"renderers":[{"id":"p1090"}]}}]}}]}},0,0,1,1],[{"type":"object","name":"Column","id":"p1206","attributes":{"children":[{"type":"object","name":"CheckboxGroup","id":"p1193","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:active",[{"type":"object","name":"CustomJS","id":"p1201","attributes":{"args":{"type":"map","entries":[["impact_renderer",[{"id":"p1050"},{"id":"p1060"},{"id":"p1070"},{"id":"p1080"},{"id":"p1090"}]],["impacts",{"id":"p1193"}],["legend",{"id":"p1094"}],["impact_dict",{"type":"map","entries":[["Acidification","orange"],["Climate change","blue"],["Energy","green"],["Eutrophication","black"],["Material ressource","red"]]}]]},"code":"\n    const nb_impacts=Object.keys(impact_dict).length\n    for (let i = 0; i &lt; nb_impacts; i++) {\n        //permet d afficher ou de cacher la courbe quand on clique ou pas\n        impact_renderer[i].visible = impacts.active.includes(i);\n        //permet d afficher ou de cacher la legende associee quand on clique ou pas\n        if (impacts.active.includes(i)==0){\n        legend.items[i].visible=false;\n        }\n        else{\n        legend.items[i].visible=true;\n        }\n    }\n"}}]]]},"labels":["Acidification","Climate change","Energy","Eutrophication","Material ressource"],"active":[0,1,2,3,4]}},{"type":"object","name":"Slider","id":"p1177","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p1200","attributes":{"args":{"type":"map","entries":[["source_impacts",{"type":"object","name":"ColumnDataSource","id":"p1004","attributes":{"selected":{"type":"object","name":"Selection","id":"p1005","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1006"},"data":{"type":"map","entries":[["h",{"type":"ndarray","array":{"type":"bytes","data":"BQAAAAYAAAAHAAAACAAAAA=="},"shape":[4],"dtype":"int32","order":"little"}],["Acidification",{"type":"ndarray","array":{"type":"bytes","data":"AQAAAAIAAAADAAAABAAAAA=="},"shape":[4],"dtype":"int32","order":"little"}],["Climate change",{"type":"ndarray","array":{"type":"bytes","data":"CgAAAAsAAAAMAAAADQAAAA=="},"shape":[4],"dtype":"int32","order":"little"}],["Energy",{"type":"ndarray","array":{"type":"bytes","data":"FAAAABYAAAAYAAAAGgAAAA=="},"shape":[4],"dtype":"int32","order":"little"}],["Eutrophication",{"type":"ndarray","array":{"type":"bytes","data":"FAAAABoAAAAcAAAAHgAAAA=="},"shape":[4],"dtype":"int32","order":"little"}],["Material ressource",{"type":"ndarray","array":{"type":"bytes","data":"FwAAABkAAAAgAAAAKAAAAA=="},"shape":[4],"dtype":"int32","order":"little"}]]}}}],["source_impacts_per_kWh",{"id":"p1007"}],["z0",{"type":"object","name":"Slider","id":"p1175","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1200"},{"type":"object","name":"CustomJS","id":"p1202","attributes":{"args":{"type":"map","entries":[["text_widget",{"type":"object","name":"Div","id":"p1194","attributes":{"text":"Lifetime Energy Production (LEP) : 14688 kWh"}}],["windspeed_avg",{"type":"object","name":"Slider","id":"p1176","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1202"}]]]},"title":"Average windspeed $$V_{avg}$$(m/s)","start":2.5,"end":16,"value":4.446140557591026,"step":0.1}}],["lifetime",{"id":"p1177"}],["source_PC",{"type":"object","name":"ColumnDataSource","id":"p1001","attributes":{"selected":{"type":"object","name":"Selection","id":"p1002","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:indices",[{"id":"p1200"},{"id":"p1202"}]]]},"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1003"},"data":{"type":"map","entries":[["P",{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAAAABSuB6F61EKQK5H4XoUri1AUrgeheuxRECF61G4HhVSQAAAAAAAAFtAAAAAAAAgYkAAAAAAAOBmQAAAAAAAYGxAAAAAAAAgcUAAAAAAAGB0QAAAAAAAUHdAAAAAAAAQekAAAAAAAKB8QAAAAAAAQH5AAAAAAADgf0AAAAAAAGCAQAAAAAAAOIBAAAAAAACAf0AAAAAAAMB9QAAAAAAAUHxAAAAAAADwekAAAAAAAPB4QAAAAAAAgHlAAAAAAACweEAAAAAAAHB2QAAAAAAAUHRAAAAAAABQckA="},"shape":[28],"dtype":"float64","order":"little"}],["V",{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAABEAAAAAAAAAIQAAAAAAAAAxAAAAAAAAAEEAAAAAAAAASQAAAAAAAABRAAAAAAAAAFkAAAAAAAAAYQAAAAAAAABpAAAAAAAAAHEAAAAAAAAAeQAAAAAAAACBAAAAAAAAAIUAAAAAAAAAiQAAAAAAAACNAAAAAAAAAJEAAAAAAAAAlQAAAAAAAACZAAAAAAAAAJ0AAAAAAAAAoQAAAAAAAAClAAAAAAAAAKkAAAAAAAAArQAAAAAAAACxAAAAAAAAALUAAAAAAAAAuQAAAAAAAAC9AAAAAAAAAMEA="},"shape":[28],"dtype":"float64","order":"little"}]]}}}]]},"code":"\n    const v_avg_1 = windspeed_avg.value\n    const life = lifetime.value\n    const P = source_PC.data[\"P\"]\n    const V = source_PC.data[\"V\"]\n    var F = Array.from(V, (V) =&gt; 1-Math.exp(-Math.PI*Math.pow(V,2)/(4*Math.pow(v_avg_1,2))))\n    function js_compute_LEP(life, F, P) {\n        var sum=0\n        for (let i = 1; i &lt; F.length-1; i++) {\n            sum=sum+(F[i]-F[i-1])*(P[i-1]+P[i])/2\n        } \n        return life*8760*sum ;\n    }\n    const lep = Math.round(js_compute_LEP(life, F, P)/1000)\n    text_widget.text=\"Lifetime Energy Production (LEP) : \"+lep.toString()+\" kWh\"\n    //source_LEP_impacts.data[\"lep\"]=lep\n"}},{"type":"object","name":"CustomJS","id":"p1204","attributes":{"args":{"type":"map","entries":[["z0",{"id":"p1175"}],["h",{"type":"object","name":"Slider","id":"p1178","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1202"},{"id":"p1204"}]]]},"title":"Mast height $$h$$(m)","start":1,"end":30,"value":10}}],["href",{"type":"object","name":"Slider","id":"p1179","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1200"},{"id":"p1202"},{"id":"p1204"}]]]},"title":"$$h_{ref}$$(m)","start":1,"end":200,"value":50}}],["vref",{"type":"object","name":"Slider","id":"p1180","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1200"},{"id":"p1202"},{"id":"p1204"}]]]},"title":"$$V_{ref}$$(m/s)","start":1,"end":12,"value":6,"step":0.1}}],["v_avg",{"id":"p1176"}]]},"code":"\n     const Z = z0.value\n     const height = h.value\n     const hr = href.value\n     const vr = vref.value\n     const vavg = vr*Math.log(height/Z)/Math.log(hr/Z)\n     v_avg.value=vavg\n"}},{"type":"object","name":"CustomJS","id":"p1205","attributes":{"args":{"type":"map","entries":[["z0",{"id":"p1175"}],["map_widget",{"type":"object","name":"Div","id":"p1199","attributes":{"text":"&lt;iframe src=/home/vlechappe/Desktop/INSA/divers/python/tracer_map/data/new/map_new_10x10.html style='min-width:calc(50vw - 26px); height: 500px'&gt;&lt;iframe&gt;"}}]]},"code":"\n     const Z = z0.value\n     const size = \"1000x1000\"\n\n    if (Z&lt;0.5){\n        map_widget.text = \"&lt;iframe src=/home/vlechappe/Desktop/INSA/divers/python/tracer_map/data/new/map_new_10x10.html style='min-width:calc(50vw - 26px); height: 500px'&gt;&lt;iframe&gt;\" \n    }\n    else{\n        map_widget.text = \"&lt;iframe src=/home/vlechappe/Desktop/INSA/divers/python/tracer_map/data/new/map_new_\"+size+\".html style='min-width:calc(50vw - 26px); height: 500px'&gt;&lt;iframe&gt;\" \n    }\n"}}]]]},"title":"Roughness length$$z_0$$(m)","start":0.01,"end":1,"value":0.1,"step":0.01}}],["href",{"id":"p1179"}],["vref",{"id":"p1180"}],["lifetime",{"id":"p1177"}],["source_PC",{"id":"p1001"}]]},"code":"\n    const Z = z0.value\n    const hr = href.value\n    const vr = vref.value\n    const life = lifetime.value\n    const P = source_PC.data[\"P\"]\n    const V = source_PC.data[\"V\"]\n    const h = source_impacts.data[\"h\"]\n    const v_avg = Array.from(h, (h) =&gt; vr*Math.log(h/Z)/Math.log(hr/Z))\n    const lep = new Array(h.length) \n    var F = new Array(h.length)\n    function js_compute_LEP(life, F, P) {\n         var sum=0\n         for (let i = 1; i &lt; F.length-1; i++) {\n             sum=sum+(F[i]-F[i-1])*(P[i-1]+P[i])/2\n         } \n         return life*8760*sum ;\n    }\n    for (const [key, value] of Object.entries(source_impacts_per_kWh.data)) {\n        if (key != \"h\"){\n            for (let i = 0; i &lt; v_avg.length; i++) {\n                F = Array.from(V, (V) =&gt; 1-Math.exp(-Math.PI*Math.pow(V,2)/(4*Math.pow(v_avg[i],2))))\n                lep[i]=js_compute_LEP(life, F, P)/1000\n                source_impacts_per_kWh.data[key][i] =  source_impacts.data[key][i]/lep[i]\n            }\n        }\n    }\n    source_impacts_per_kWh.change.emit()\n"}},{"id":"p1202"},{"type":"object","name":"CustomJS","id":"p1203","attributes":{"args":{"type":"map","entries":[["lifetime",{"id":"p1177"}],["source_LEP_plot",{"type":"object","name":"ColumnDataSource","id":"p1010","attributes":{"selected":{"type":"object","name":"Selection","id":"p1011","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1012"},"data":{"type":"map","entries":[["v_avg",{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAABEDWmEgPVM4EQKwxkR6onAVAgsrZLfxqBkBYYyI9UDkHQC78akykBwhABJWzW/jVCEDaLfxqTKQJQLDGRHqgcgpAhl+NifRAC0Bc+NWYSA8MQDKRHqic3QxACCpnt/CrDUDewq/GRHoOQLRb+NWYSA9ARXqgcnYLEECwxkR6oHIQQBsT6YHK2RBAhl+NifRAEUDxqzGRHqgRQFz41ZhIDxJAxkR6oHJ2EkAykR6onN0SQJzdwq/GRBNACCpnt/CrE0Bydgu/GhMUQN7Cr8ZEehRASA9Uzm7hFEC0W/jVmEgVQB6onN3CrxVAivRA5ewWFkD0QOXsFn4WQGCNifRA5RZAytkt/GpMF0A2JtIDlbMXQKBydgu/GhhADL8aE+mBGEB2C78aE+kYQOJXYyI9UBlATKQHKme3GUC38KsxkR4aQCI9UDm7hRpAjYn0QOXsGkD41ZhID1QbQGMiPVA5uxtAzm7hV2MiHEA5u4VfjYkcQKQHKme38BxAD1TObuFXHUB6oHJ2C78dQOXsFn41Jh5AUDm7hV+NHkC7hV+NifQeQCbSA5WzWx9AkR6onN3CH0B+NSbSAxUgQLRb+NWYSCBA6YHK2S18IEAeqJzdwq8gQFTObuFX4yBAivRA5ewWIUC/GhPpgUohQPRA5ewWfiFAKme38KuxIUBgjYn0QOUhQJWzW/jVGCJAytkt/GpMIkAAAAAAAIAiQDYm0gOVsyJAa0ykByrnIkCgcnYLvxojQNaYSA9UTiNADL8aE+mBI0BB5ewWfrUjQHYLvxoT6SNArDGRHqgcJEDiV2MiPVAkQBd+NSbSgyRATKQHKme3JECCytkt/OokQLfwqzGRHiVA7RZ+NSZSJUAiPVA5u4UlQFhjIj1QuSVAjYn0QOXsJUDDr8ZEeiAmQPjVmEgPVCZALvxqTKSHJkBjIj1QObsmQJlID1TO7iZAzm7hV2MiJ0AElbNb+FUnQDm7hV+NiSdAb+FXYyK9J0CkBypnt/AnQNot/GpMJChAD1TObuFXKEBFeqBydosoQHqgcnYLvyhAsMZEeqDyKEDl7BZ+NSYpQBsT6YHKWSlAUDm7hV+NKUCGX42J9MApQLuFX42J9ClA8asxkR4oKkAm0gOVs1sqQFz41ZhIjypAkR6onN3CKkDHRHqgcvYqQPxqTKQHKitAMpEeqJxdK0Bnt/CrMZErQJ3dwq/GxCtA0gOVs1v4K0AIKme38CssQD1QObuFXyxAc3YLvxqTLEConN3Cr8YsQN7Cr8ZE+ixAE+mBytktLUBJD1TObmEtQH41JtIDlS1AtFv41ZjILUDpgcrZLfwtQB+onN3CLy5AVM5u4VdjLkCK9EDl7JYuQL8aE+mByi5A9EDl7Bb+LkAqZ7fwqzEvQF+NifRAZS9AlbNb+NWYL0DK2S38aswvQAAAAAAAADBA"},"shape":[135],"dtype":"float64","order":"little"}],["lep",{"type":"ndarray","array":{"type":"bytes","data":"x/dvYexjoUCvrsMe14qkQN863cx396dADIlGffSnq0Cad112G5qvQFT3LK+15bFAeXgKvowctEBMNkmCC3C2QAchdReL3rhAnR7ZxUdmu0BUiBjzYwW+QK6f0bH1XMBAmch5Y+vAwUCFNwy+hy3DQGPPlbq5ocRAcikxj2wcxkBf7K6XiZzHQOR8+yj6IMlAHhDPR6moykB03TU+hTLMQEHkIQ6Bvc1A6S89wZVIz0B0z8HLYWnQQEkJaIuJLdFAakLR/krw0UCWho4NNLHSQOFV3AbYb9NAG8LS9M8r1EAh6KTjuuTUQKPr+Bw+mtVAgmVFVwVM1kBa8xnZwvnWQCssRJAvo9dAmMvcHAtI2EBmwm3QG+jYQOpJjKEug9lANsxtFBcZ2kBQ2ycZr6naQK7eb+DWNNtA9MDMp3S620B+xEJ+dDrcQG9rjwLItNxAMlERHGYp3UAoj3avSpjdQBu3RFB2Ad5Ab51A8O1k3kB1NauNusLeQMm4NOHoGt9AUDZxDIlt30DFYYJJrrrfQIpqSU43AeBA+MjTQ3Ei4EBd/JpgEkHgQMx/6/YoXeBADkKuLsR24EAvpr3l843gQCrnFZLIouBAvZPqJVO14EBxaaT1pMXgQGBHxZ/P0+BAdDmr9uTf4EDxqyfs9ungQM6e3H4X8uBA0h5PqVj44EDGT5xSzPzgQODcvECE/+BAHKRBDJIA4UAN1XMVBwDhQI13wnr0/eBASlJnEGv64ECRay1Ze/XgQJzRQ4A17+BAp/MHVKnn4ECekLNB5t7gQBET21H71OBABReqJffJ4EB2xsz0573gQLGw9YvbsOBAzbrwS9+i4EBHwTQpAJTgQEp55qtKhOBAPBFA8Mpz4EBt+lGnjGLgQK4mEhibUOBAWd2vIAE+4EClGCM4ySrgQJMf72/9FuBA9sgQdqcC4ECfAyMuodvfQKOmcYADsd9A93mtA4eF30ARiUMjPFnfQF5BSJoyLN9AhLpneHn+3kBuj+QmH9DeQGK0nm0xod5AnnUceL1x3kBRd5Daz0HeQDAw2JZ0Ed5AWeluIbfg3UDN0lFmoq/dQJ800s1Aft1AbTJTQZxM3UC3+fAvvhrdQK6MD5Ov6NxAeKzP8ni23EAnrWhqIoTcQH8/ZqyzUdxArXXJBjQf3EBgfAxnquzbQD6vCF4duttAOdi+I5OH20BOjQGbEVXbQFm/AVWeIttAdqi9lD7w2kD+X1JS973aQA9vMD7Ni9pAEdIzxMRZ2kDm4p8O4ifaQAS0/wgp9tlAim/rYp3E2UB4VbOSQpPZQBT88NcbYtlA0Hn/PSwx2UApJVuedgDZQAyZ6aL9z9hAy64qyMOf2EDFHlNfy2/YQNp5UZAWQNhASiy+W6cQ2EAJOrecf+HXQCRiqAqhstdAI1UAOw2E10AUp9OixVXXQHcjbpjLJ9dA"},"shape":[135],"dtype":"float64","order":"little"}]]}}}],["source_PC",{"id":"p1001"}]]},"code":"\n    const life = lifetime.value\n    const P=source_PC.data[\"P\"]\n    const V=source_PC.data[\"V\"]\n    const v_avg = source_LEP_plot.data[\"v_avg\"] \n    const lep = new Array(v_avg.length)\n    var F = new Array(V.length) \n    function js_compute_LEP(life, F, P) {\n         var sum=0\n         for (let i = 1; i &lt; F.length-1; i++) {\n             sum=sum+(F[i]-F[i-1])*(P[i-1]+P[i])/2\n         } \n         return life*8760*sum ;\n    }\n    for (let i = 0; i &lt; v_avg.length; i++) {\n             F = Array.from(V, (V) =&gt; 1-Math.exp(-Math.PI*Math.pow(V,2)/(4*Math.pow(v_avg[i],2))))\n             lep[i]=js_compute_LEP(life, F, P)/1000\n    } \n    source_LEP_plot.data = {v_avg, lep}     \n"}}]]]},"title":"Lifetime (year)","start":1,"end":30,"value":15}},{"id":"p1194"},{"type":"object","name":"Div","id":"p1195","attributes":{"text":"$$ LEP = N_h \\sum_{i=1}^N[F(V_i)-F(V_{i-1})]\\left(\\frac{P_{i-1}+P_i}{2}\\right)$$with :$$F(V) = 1-e^{-\\frac{\\pi}{4}\\left(\\frac{V}{V_{avg}}\\right)^2}$$and $$N_h=$$lifetimex8760"}},{"type":"object","name":"Div","id":"p1196","attributes":{"text":"Energy Return On Investment (EROI) : "}}]}},0,1,1,1],[{"type":"object","name":"DataTable","id":"p1187","attributes":{"width":400,"height":500,"source":{"id":"p1001"},"view":{"type":"object","name":"CDSView","id":"p1191","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1192"}}},"columns":[{"type":"object","name":"TableColumn","id":"p1181","attributes":{"field":"P","title":"Power : P (W)","formatter":{"type":"object","name":"StringFormatter","id":"p1182"},"editor":{"type":"object","name":"StringEditor","id":"p1183"}}},{"type":"object","name":"TableColumn","id":"p1184","attributes":{"field":"V","title":"Windspeed : V (m/s) ","formatter":{"type":"object","name":"StringFormatter","id":"p1185"},"editor":{"type":"object","name":"StringEditor","id":"p1186"}}}],"editable":true,"index_position":null,"scroll_to_selection":false}},0,2,1,1],[{"type":"object","name":"Div","id":"p1197","attributes":{"width":500,"height":100,"text":"On peut copier coller directement depuis libre office. Si il n'y a pas autant de valeur disponible, il suffit de mettre \u00e0 0 sur la colonne des puissances.\n    "}},0,3,1,1],[{"type":"object","name":"GridBox","id":"p1208","attributes":{"rows":null,"cols":null,"children":[[{"type":"object","name":"Div","id":"p1198","attributes":{"styles":{"type":"map","entries":[["background-color","#fafafa"]]},"text":"Select $$h,z_0,h_{ref},V_{ref}$$and $$V_{avg}$$ is computed form the fomula $$V_{avg} = V_{ref}\\frac{\\ln\\left(\\frac{h}{z_0}\\right)}{\\ln\\left(\\frac{h_{ref}}{z_0}\\right)}$$or directly select $$V_{avg}$$with the slider"}},0,0,1,2],[{"type":"object","name":"Column","id":"p1207","attributes":{"children":[{"id":"p1178"},{"id":"p1175"},{"id":"p1179"},{"id":"p1180"}]}},1,0,1,1],[{"id":"p1176"},1,1,1,1]]}},1,0,1,1],[{"type":"object","name":"Figure","id":"p1135","attributes":{"width":400,"height":400,"x_range":{"type":"object","name":"DataRange1d","id":"p1137"},"y_range":{"type":"object","name":"Range1d","id":"p1145","attributes":{"end":72000}},"x_scale":{"type":"object","name":"LinearScale","id":"p1146"},"y_scale":{"type":"object","name":"LinearScale","id":"p1147"},"title":{"type":"object","name":"Title","id":"p1138","attributes":{"text":"Lifetime Energy Production (LEP)"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p1172","attributes":{"data_source":{"id":"p1010"},"view":{"type":"object","name":"CDSView","id":"p1173","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1174"}}},"glyph":{"type":"object","name":"Line","id":"p1169","attributes":{"x":{"type":"field","field":"v_avg"},"y":{"type":"field","field":"lep"},"line_color":"red","line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"p1170","attributes":{"x":{"type":"field","field":"v_avg"},"y":{"type":"field","field":"lep"},"line_color":"red","line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"p1171","attributes":{"x":{"type":"field","field":"v_avg"},"y":{"type":"field","field":"lep"},"line_color":"red","line_alpha":0.2,"line_width":2}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1144","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1158"},{"type":"object","name":"WheelZoomTool","id":"p1159"},{"type":"object","name":"BoxZoomTool","id":"p1160","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p1161","attributes":{"syncable":false,"level":"overlay","visible":false,"left_units":"canvas","right_units":"canvas","bottom_units":"canvas","top_units":"canvas","line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"SaveTool","id":"p1162"},{"type":"object","name":"ResetTool","id":"p1163"},{"type":"object","name":"HelpTool","id":"p1164"},{"type":"object","name":"HoverTool","id":"p1165","attributes":{"renderers":"auto","tooltips":[["(V_avg,E)","($x{(0.0)}, $y{(0.0a)})"]]}}]}},"left":[{"type":"object","name":"LinearAxis","id":"p1153","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1154","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1155"},"axis_label":"Energy (kWh)","major_label_policy":{"type":"object","name":"AllLabels","id":"p1156"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p1148","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1149","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1150"},"axis_label":"average windspeed (m/s)","major_label_policy":{"type":"object","name":"AllLabels","id":"p1151"}}}],"center":[{"type":"object","name":"Grid","id":"p1152","attributes":{"axis":{"id":"p1148"}}},{"type":"object","name":"Grid","id":"p1157","attributes":{"dimension":1,"axis":{"id":"p1153"}}}]}},1,1,1,1],[{"type":"object","name":"Figure","id":"p1095","attributes":{"width":400,"height":400,"x_range":{"type":"object","name":"DataRange1d","id":"p1097"},"y_range":{"type":"object","name":"Range1d","id":"p1105","attributes":{"end":600}},"x_scale":{"type":"object","name":"LinearScale","id":"p1106"},"y_scale":{"type":"object","name":"LinearScale","id":"p1107"},"title":{"type":"object","name":"Title","id":"p1098","attributes":{"text":"Power curve"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p1132","attributes":{"data_source":{"id":"p1001"},"view":{"type":"object","name":"CDSView","id":"p1133","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1134"}}},"glyph":{"type":"object","name":"Line","id":"p1129","attributes":{"x":{"type":"field","field":"V"},"y":{"type":"field","field":"P"},"line_color":"red","line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"p1130","attributes":{"x":{"type":"field","field":"V"},"y":{"type":"field","field":"P"},"line_color":"red","line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"p1131","attributes":{"x":{"type":"field","field":"V"},"y":{"type":"field","field":"P"},"line_color":"red","line_alpha":0.2,"line_width":2}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1104","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1118"},{"type":"object","name":"WheelZoomTool","id":"p1119"},{"type":"object","name":"BoxZoomTool","id":"p1120","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p1121","attributes":{"syncable":false,"level":"overlay","visible":false,"left_units":"canvas","right_units":"canvas","bottom_units":"canvas","top_units":"canvas","line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"SaveTool","id":"p1122"},{"type":"object","name":"ResetTool","id":"p1123"},{"type":"object","name":"HelpTool","id":"p1124"},{"type":"object","name":"HoverTool","id":"p1125","attributes":{"renderers":"auto","tooltips":[["(V,P)","($x{(0.0)}, $y{(0.)})"]]}}]}},"left":[{"type":"object","name":"LinearAxis","id":"p1113","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1114","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1115"},"axis_label":"Power (W)","major_label_policy":{"type":"object","name":"AllLabels","id":"p1116"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p1108","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1109","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1110"},"axis_label":"windspeed (m/s)","major_label_policy":{"type":"object","name":"AllLabels","id":"p1111"}}}],"center":[{"type":"object","name":"Grid","id":"p1112","attributes":{"axis":{"id":"p1108"}}},{"type":"object","name":"Grid","id":"p1117","attributes":{"dimension":1,"axis":{"id":"p1113"}}}]}},1,2,1,1],[{"id":"p1199"},2,0,1,4]]}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('p1226').textContent;
              const render_items = [{"docid":"dc7b7d35-3fce-435a-a0cb-79742417862f","roots":{"p1209":"ab1a0fab-440d-4344-8975-8b242c075903"},"root_ids":["p1209"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>